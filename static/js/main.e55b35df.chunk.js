(this.webpackJsonpMomentum=this.webpackJsonpMomentum||[]).push([[0],{226:function(e,t,a){e.exports=a(360)},310:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},360:function(e,t,a){"use strict";a.r(t);a(227),a(253),a(255),a(256),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(294),a(295);var n=a(0),c=a.n(n),r=a(55),o=a.n(r),l=a(19),s=a.n(l),i=a(11),m=a(87),d=a.n(m),u=a(123),f=a(8),v=a(84),E=a.n(v),b=a(136),p=a.n(b),h=a(135),N=a.n(h),O=(a(308),a(29)),j=a.n(O),w=a(125),y=a.n(w),g=a(126),k=a.n(g),S=a(31),T=a.n(S),_=a(66),C=a.n(_),B=a(124),x=a.n(B),V=a(20),M=a(28),F=a.n(M),H=a(1),A=a.n(H),D=(a(310),function(e){var t=e.className,a=e.color,n=e.font,r=e.bold,o=e.children;return c.a.createElement("span",{className:A()(["text",t,"text-".concat(a),"text-".concat(n)],{"text-bold":r})},o)}),I=function(e){var t=e.className,a=e.children,n=Object(V.a)(e,["className","children"]);return c.a.createElement(F.a,{className:"header-title-wrapper"},c.a.createElement(D,Object.assign({className:t},n),a))},W=a(32),P=function(e){var t={},a={days:86400,hours:3600,minutes:60,seconds:1},n=(+e-+new Date)/1e3;return t.time=n>0?"future":"past",n=Math.abs(n),Object.keys(a).forEach((function(e){t[e]=Math.floor(n/a[e]),n-=t[e]*a[e]})),t},q=function(e){var t=Object(n.useState)(P(e)),a=Object(f.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var t=setInterval((function(){r((function(t){return Object(W.a)(Object(W.a)({},t),P(e))}))}),1e3);return function(){clearInterval(t)}}),[e]),c},K=a(49);a(114);K.locale("ru");var L,Y=function(e){return K(e).format("LLL")},z=a(48),J=[],R=[2,0,1,1,1,2],G=function(e,t){return J[e]||(J[e]=e%100>4&&e%100<20?2:R[Math.min(e%10,5)]),t[J[e]]},U={seconds:["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],minutes:["\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"],hours:["\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043e\u0432"],days:["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"]},Q=function(e,t){for(var a=["days","hours","minutes","seconds"],n="seconds",c=0;c<a.length;c+=1)if(e[a[c]]>0){n=a[c];break}return t?[e[n],G(e[n],U[n])]:a.reduce((function(t,a){return Object(W.a)(Object(W.a)({},t),{},Object(z.a)({},a,[e[a],G(e[a],U[a])]))}),{})},X=(a(313),function(e){var t=e.id,a=e.className,n=e.name,r=e.date,o=e.theme,l=e.onPreviewCardClick,s=q(r),i=s.time,m=Object(V.a)(s,["time"]),d=Q(m,!0),u=Object(f.a)(d,2),v=u[0],E=u[1];return c.a.createElement(F.a,{className:"preview-card-wrapper","data-to":"event",onClick:function(e){return l(e,t)}},c.a.createElement("div",{className:A()(["preview-card",a,"preview-card-".concat(o)])},c.a.createElement("div",{className:"card-event"},c.a.createElement(D,{color:"transparent",font:"body3"},"future"===i?"\u0414\u043e":"C"),c.a.createElement(D,{color:"white",font:"h3",bold:!0},n)),c.a.createElement("div",{className:"card-date"},c.a.createElement(D,{color:"transparent",font:"body3"},Y(r)),c.a.createElement("div",{className:"date-inline"},c.a.createElement(D,{color:"white",font:"h3",bold:!0},v),c.a.createElement(D,{className:"date-inline-type",color:"transparent",font:"body3"},E)))))}),Z=(a(314),function(e){var t=e.id,a=e.goForward,n=e.fetchedEvents,r=e.setEvent,o=function(e,t){a(e),r(t),s.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"})};return c.a.createElement(j.a,{id:t,separator:!1},c.a.createElement(I,{className:"home-header",color:"softBlue",font:"h1",bold:!0},"\u041c\u043e\u0438 \u0421\u043e\u0431\u044b\u0442\u0438\u044f"),c.a.createElement(y.a,{title:"Events"},c.a.createElement(k.a,null,n&&n.map((function(e){var t=e.id,a=e.name,n=e.date,r=e.theme;return c.a.createElement(X,{key:"event-".concat(t),id:t,name:a,date:n,theme:r,onPreviewCardClick:o})})))),c.a.createElement(C.a,{vertical:"bottom"},c.a.createElement(T.a,{className:"add-button",before:c.a.createElement(x.a,null),onClick:a,"data-to":"create_event_name"})))}),$=a(12),ee=a(129),te=a.n(ee),ae=a(127),ne=a.n(ae),ce=a(128),re=a.n(ce),oe=(a(329),function(e){var t=e.className,a=e.osName,n=e.goBack,r=e.color,o=e.text,l=e.edit;return c.a.createElement("div",{className:A()(["header-wrapper","header-wrapper-".concat(r),t])},n&&c.a.createElement(te.a,{onClick:n,"data-to":"home",className:"header-button"},a===$.b?c.a.createElement(ne.a,null):c.a.createElement(re.a,null)),o&&c.a.createElement(D,{className:"header-text",font:"body3",bold:!0},o),l&&c.a.createElement(D,{className:"header-edit",font:"body3",bold:!0},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))}),le=(a(330),a(331),a(332),a(333),a(334),a(335),"h3"),se="body1",ie="body3",me=7,de=10,ue=(a(336),{"blue-gradient":function(e){var t=e.days,a=e.hours,n=e.minutes,r=e.seconds,o=e.fontSize;return c.a.createElement("div",{className:A()(["event-card-date","event-card-date-inline"])},c.a.createElement("div",{className:A()(["event-card-time","event-card-time-inline"])},c.a.createElement(D,{color:"white",font:o},t[0]),c.a.createElement(D,{color:"transparent",font:"body3"},t[1])),c.a.createElement(D,{className:"colon-separator",color:"white",font:o},":"),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-inline"])},c.a.createElement(D,{color:"white",font:o},a[0]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",a[1])),c.a.createElement(D,{className:"colon-separator",color:"white",font:o},":"),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-inline"])},c.a.createElement(D,{color:"white",font:o},[n[0]]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",n[1])),c.a.createElement(D,{className:"colon-separator",color:"white",font:o},":"),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-inline"])},c.a.createElement(D,{color:"white",font:o},r[0]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",r[1])))},"red-gradient":function(e){var t=e.days,a=e.hours,n=e.minutes,r=e.seconds;return c.a.createElement("div",{className:A()(["event-card-date","event-card-date-center"])},c.a.createElement(D,{className:A()(["event-card-time","event-card-time-center"]),color:"white",font:"h1"},t[0],c.a.createElement("div",{className:"event-card-days-after","data-width":t[1].length},c.a.createElement(D,{color:"transparent",font:"body2","data-width":"3"},t[1]))),c.a.createElement(D,{className:A()(["event-card-time","event-card-time-center"]),color:"white",font:"h1"},a[0],c.a.createElement("div",{className:"event-card-hours-before","data-width":a[1].length},c.a.createElement(D,{color:"transparent",font:"body2"},a[1]))),c.a.createElement(D,{className:A()(["event-card-time","event-card-time-center"]),color:"white",font:"h1"},n[0],c.a.createElement("div",{className:"event-card-minutes-after","data-width":n[1].length},c.a.createElement(D,{color:"transparent",font:"body2"},n[1]))),c.a.createElement(D,{className:A()(["event-card-time","event-card-time-center"]),color:"white",font:"h1"},r[0],c.a.createElement("div",{className:"event-card-seconds-before","data-width":r[1].length},c.a.createElement(D,{color:"transparent",font:"body2"},r[1]))))},"violet-gradient":function(e){var t=e.days,a=e.hours,n=e.minutes,r=e.seconds;return c.a.createElement("div",{className:A()(["event-card-date","event-card-date-square"])},c.a.createElement("div",{className:A()(["event-card-time","event-card-time-square"])},c.a.createElement(D,{color:"white",font:"h1"},t[0]),c.a.createElement(D,{color:"transparent",font:"body3"},t[1])),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-square"])},c.a.createElement(D,{color:"white",font:"h1"},a[0]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",a[1])),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-square"])},c.a.createElement(D,{color:"white",font:"h1"},n[0]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",n[1])),c.a.createElement("div",{className:A()(["event-card-time","event-card-time-square"])},c.a.createElement(D,{color:"white",font:"h1"},r[0]),c.a.createElement(D,{color:"transparent",font:"body3"}," ",r[1])))}}),fe=function(e){var t=e.theme,a=Object(V.a)(e,["theme"]);return Object(n.createElement)(ue[t],a)},ve=function(e){var t=e.name,a=e.date,n=e.theme,r=q(a),o=r.time,l=Object(V.a)(r,["time"]),s=Q(l),i=function(e){var t=Object.keys(e).reduce((function(t,a){return t+e[a]}),"").length;return t<=me?le:t>me&&t<de?se:ie}(s);return c.a.createElement("div",{className:A()(["event-card-wrapper"])},c.a.createElement(D,{color:"white",font:"body2",bold:!0},"future"===o?"\u0414\u043e":"C",": ",t),c.a.createElement(D,{color:"transparent",font:"body3"},Y(a)),c.a.createElement(fe,Object.assign({theme:n,fontSize:i},s)))},Ee=Object($.c)(),be=function(e){var t=e.id,a=e.goBack,n=e.eventId,r=Object(i.c)((function(e){return e.events.events.filter((function(e){return e.id===n}))})),o=Object(f.a)(r,1)[0];return c.a.createElement(j.a,{id:t,separator:!1,className:A()(["event-panel","event-panel-".concat(o.theme)])},c.a.createElement(oe,{osName:Ee,goBack:a,color:"white",edit:!0}),c.a.createElement(ve,o))},pe=(a(337),Object(n.forwardRef)((function(e,t){var a=e.className,n=e.color,r=e.font,o=Object(V.a)(e,["className","color","font"]);return c.a.createElement("input",Object.assign({className:A()(["input",a,"input-".concat(n),"input-".concat(r)]),ref:t},o))}))),he="NEW_EVENT:SET_NAME",Ne="NEW_EVENT:SET_DATE",Oe="NEW_EVENT:SET_THEME",je="NEW_EVENT:CLEAR",we=(a(338),Object($.c)()),ye=function(e){var t=e.id,a=e.goForward,r=e.goBack,o=Object(i.b)(),l=Object(n.useState)(""),s=Object(f.a)(l,2),m=s[0],d=s[1],u=Object(n.useRef)(null);return Object(n.useEffect)((function(){u.current.focus()}),[u]),c.a.createElement(j.a,{id:t,separator:!1},c.a.createElement(oe,{osName:we,goBack:r,color:"black"}),c.a.createElement(F.a,{className:A()(["create-event-name-wrapper"])},c.a.createElement(D,{className:"create-event-name-title",color:"black",font:"body3",bold:!0},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f:"),c.a.createElement(pe,{className:"create-event-name-input",placeholder:"\u041d\u0430\u0437\u043e\u0432\u0438 \u041c\u0435\u043d\u044f",onChange:function(e){var t=e.target.value;return d(t)},value:m,font:"h3",color:"softBlue",ref:u}),c.a.createElement(T.a,{className:"create-event-name-button",onClick:function(e){o(function(e){return{type:he,payload:{name:e}}}(m||"\u041d\u0430\u0437\u043e\u0432\u0438 \u041c\u0435\u043d\u044f")),a(e)},"data-to":"create_event_date"},"\u0413\u043e\u0442\u043e\u0432\u043e")))},ge=a(130),ke=a.n(ge),Se=a(131),Te=a.n(Se),_e=(a(339),function(e){var t=e.className,a=e.children,n=e.isOpen;return c.a.createElement("div",{className:A()(["modal-wrapper",t,{hidden:!n}])},c.a.createElement("div",{className:"modal-content"},a))}),Ce=a(132),Be=Object($.c)(),xe=(L={},Object(z.a)(L,$.b,"ios"),Object(z.a)(L,$.a,"android"),L),Ve=xe[Be]?xe[Be]:"default",Me={1:"\u044f\u043d\u0432\u0430\u0440\u044f",2:"\u0444\u0435\u0432\u0440\u0430\u043b\u044f",3:"\u043c\u0430\u0440\u0442\u0430",4:"\u0430\u043f\u0440\u0435\u043b\u044f",5:"\u043c\u0430\u044f",6:"\u0438\u044e\u043d\u044f",7:"\u0438\u044e\u043b\u044f",8:"\u0430\u0432\u0433\u0443\u0441\u0442\u0430",9:"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f",10:"\u043e\u043a\u0442\u044f\u0431\u0440\u044f",11:"\u043d\u043e\u044f\u0431\u0440\u044f",12:"\u0434\u0435\u043a\u0430\u0431\u0440\u044f"},Fe={date:{format:"DD",caption:"Day",step:1},month:{format:function(e){return Me[e.getMonth()+1]},caption:"Mon",step:1},year:{format:"YYYY",caption:"Year",step:1}},He={hour:{format:"hh",caption:"Hour",step:1},minute:{format:"mm",caption:"Min",step:1}},Ae=function(e){var t=e.exactTime,a=Object(V.a)(e,["exactTime"]);return c.a.createElement(Ce,Object.assign({theme:Ve,isPopup:!1,showHeader:!1,showFooter:!1,dateConfig:t?He:Fe},a))};K.locale("ru");a(340);var De=Object($.c)(),Ie=function(e){var t=e.id,a=e.goForward,r=e.goBack,o=Object(i.b)(),l=Object(n.useState)(new Date),s=Object(f.a)(l,2),m=s[0],d=s[1],u=Object(n.useState)(!1),v=Object(f.a)(u,2),E=v[0],b=v[1],p=Object(n.useState)(!1),h=Object(f.a)(p,2),N=h[0],O=h[1];return c.a.createElement(j.a,{id:t,separator:!1},c.a.createElement(_e,{isOpen:N},c.a.createElement("div",{className:"create-event-date-modal"},c.a.createElement(D,{className:"title",color:"black",font:"body3",bold:!0},"\u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f:"),E&&c.a.createElement(Ae,{value:E,onChange:function(e){return b(e)},exactTime:!0}),c.a.createElement(T.a,{className:"button",onClick:function(){O(!1)}},"\u0413\u043e\u0442\u043e\u0432\u043e"))),c.a.createElement(oe,{osName:De,goBack:r,color:"black"}),c.a.createElement(F.a,{className:A()(["create-event-date-wrapper"])},c.a.createElement(D,{className:"create-event-date-title",color:"black",font:"body3",bold:!0},"\u0414\u0430\u0442\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f:"),c.a.createElement(Ae,{value:m,onChange:function(e){return d(e)}}),c.a.createElement("div",{className:"time-picker",onClick:function(){E||b(new Date(0)),O(!0)}},c.a.createElement(ke.a,null),c.a.createElement(D,{className:"time-picker-text"},E?function(e){return K(e).format("HH:mm")}(E):"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f"),E&&c.a.createElement(Te.a,{onClick:function(e){e.stopPropagation(),b(!1)}})),c.a.createElement(T.a,{className:"create-event-date-button",onClick:function(e){m.setSeconds(0),m.setMilliseconds(0),E?(m.setHours(E.getHours()),m.setMinutes(E.getMinutes())):(m.setHours(0),m.setMinutes(0)),o(function(e){return{type:Ne,payload:{date:e}}}(m.getTime())),a(e)},"data-to":"create_event_theme"},"\u0413\u043e\u0442\u043e\u0432\u043e")))},We=a(133),Pe=a(134),qe=a.n(Pe),Ke=(a(349),function(e){var t=e.className,a=e.theme,n=e.selected;return c.a.createElement("div",{className:A()(["event-card-example",t,"event-card-example-".concat(a)]),"data-theme":a},n&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"selected"}),c.a.createElement(qe.a,{fill:"white",className:"done-icon"})))}),Le=0,Ye=1,ze=2,Je=3,Re="EVENTS:SET_EVENTS",Ge="EVENTS:SET_LOADING_STATE",Ue="EVENTS:ADD_EVENT",Qe=function(e){return{type:Ge,payload:{loadingState:e}}},Xe=function(e){return function(t){t(Qe(Ye)),fetch("https://momentum-server.ru/user/".concat(e)).then((function(e){return e.json()})).then((function(e){var a=e.events;t(function(e){return{type:Re,payload:{events:e}}}(a)),t(Qe(ze))})).catch((function(e){console.error(e),t(Qe(Je))}))}},Ze=function(e,t){return function(a){a(function(e){return{type:Ue,payload:{event:e}}}(t)),fetch("https://momentum-server.ru/user/".concat(e,"/add_event"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:t})})}},$e=(a(350),Object($.c)()),et=["red-gradient","blue-gradient","violet-gradient"],tt=function(e){var t=e.id,a=e.goForward,r=e.goBack,o=e.clearHistory,l=e.userId,s=Object(i.b)(),m=Object(i.c)((function(e){return e.newEvent.newEvent})),d=Object(n.useState)("red-gradient"),u=Object(f.a)(d,2),v=u[0],E=u[1];return c.a.createElement(j.a,{id:t,separator:!1},c.a.createElement(oe,{className:"create-event-theme-header",osName:$e,goBack:r,color:"black",text:"\u0422\u0435\u043c\u044b \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f"}),c.a.createElement(F.a,{className:A()(["create-event-theme-wrapper"])},c.a.createElement("div",{className:"example-cards-container",onClick:function(e){var t=e.target.dataset.theme;t&&E(t)}},et.map((function(e){return c.a.createElement(Ke,{key:e,theme:e,selected:v===e})}))),c.a.createElement(C.a,{vertical:"bottom"},c.a.createElement(T.a,{className:"create-event-theme-button",onClick:function(e){s(Ze(l,Object(W.a)(Object(W.a)({},m),{},{theme:v,id:Object(We.generate)()}))),s({type:je}),a(e),o()},"data-to":"home"},"\u0413\u043e\u0442\u043e\u0432\u043e"))))},at=a(57),nt=(a(351),a(352),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.events})),a=t.events,r=t.loadingState,o=Object(n.useState)(c.a.createElement(N.a,{size:"large"})),l=Object(f.a)(o,2),m=l[0],v=l[1],b=function(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)([e]),l=Object(f.a)(o,2),i=l[0],m=l[1];return{activePanel:c,history:i,goForward:function(t){var a=t.currentTarget.dataset.to,n=Object(at.a)(i);n.push(a),c===e&&s.a.send("VKWebAppEnableSwipeBack"),m(n),r(a)},goBack:function(){var t=Object(at.a)(i);t.pop();var a=t[t.length-1];a===e&&s.a.send("VKWebAppDisableSwipeBack"),m(t),r(a)},clearHistory:function(){m([e])}}}("home"),h=b.activePanel,O=b.history,j=b.goForward,w=b.goBack,y=b.clearHistory,g=Object(n.useState)(null),k=Object(f.a)(g,2),S=k[0],T=k[1],_=Object(n.useState)(null),C=Object(f.a)(_,2),B=C[0],x=C[1];return Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.send("VKWebAppGetUserInfo");case 2:a=t.sent,n=a.id,x(n),e(Xe(n));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(n.useEffect)((function(){r===ze&&v(null)}),[r]),c.a.createElement(p.a,{isWebView:!0},c.a.createElement(E.a,{activePanel:h,popout:m,onSwipeBack:w,history:O,header:!1},c.a.createElement(Z,{id:"home",fetchedEvents:a,goForward:j,setEvent:T}),c.a.createElement(be,{id:"event",goBack:w,eventId:S}),c.a.createElement(ye,{id:"create_event_name",goForward:j,goBack:w}),c.a.createElement(Ie,{id:"create_event_date",goForward:j,goBack:w}),c.a.createElement(tt,{id:"create_event_theme",goForward:j,goBack:w,clearHistory:y,userId:B})))}),ct=a(47),rt=a(67),ot={events:[],loadingState:Le},lt=Object(rt.a)((function(e,t){if(t){var a=t.payload;switch(t.type){case Re:e.events=a.events;break;case Ue:e.events=[].concat(Object(at.a)(e.events),[a.event]);break;case Ge:e.loadingState=a.loadingState}}}),ot),st={newEvent:{}},it=Object(rt.a)((function(e,t){if(t){var a=t.payload;switch(t.type){case he:e.newEvent.name=a.name;break;case Ne:e.newEvent.date=a.date;break;case Oe:e.newEvent.theme=a.theme;break;case je:e.newEvent=st}}}),st),mt=a(137),dt=Object(ct.c)({events:lt,newEvent:it});s.a.send("VKWebAppInit");var ut=Object(ct.d)(dt,Object(ct.a)(mt.a));o.a.render(c.a.createElement(i.a,{store:ut},c.a.createElement(nt,null)),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.e55b35df.chunk.js.map